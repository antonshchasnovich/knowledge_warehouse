[<-----](https://github.com/s1tcomsfan/knowledge_warehouse/blob/main/databases/SQL/contents.md)

# Нормализация

**Нормальная форма** - требование, предъявляемое к структуре таблиц в теолии реляционных баз данных для устранения из базы избыточных функциональных зависимостей между атрибутами (полями таблиц).

**Метод нормальных форм (НФ)** - состоит в сборе информации об объектах решения задачи в рамках одного отношения и последующей декомпозиции этого отношения на несколько взаимосвязанных отношений на основе процедур нормализации отношений.

**Цель нормализации** - исключить избыточное дублирование данных, которое является причиной аномалий, возникших при добавлении, редактировании и удалении кортежей (строк таблицы).

**Аномалия** - такая ситуация в БД, которая приводит к противоречию в БД либо существенно усложняет обработку БД. Причиной является излишнее дублирование данных в таблице, которое вызывается наличием функциональных зависимостей от не ключевых атрибутов.

**Аномалии-модификации** проявляются в том, что изменение одних данных может повлечь просмотр всей таблицы и соответствующее изменение некоторых записей таблицы.

**Аномалии-удаления** - при удалении какого либо кортежа из таблицы может попасть информация, которая не связана на прямую с удаляемой записью.

**Аномалии-добавления** - возникают, когда информацию в таблицу нельзя поместить, пока она не полная, либо вставка записи требует дополнительного просмотра таблицы.

## Первая нормальная форма

Отношение находится в 1НФ, если все его атрибуты являются простыми, все используемые домены должны содержать только скалярные значения. Не должно быть повторений строк в таблице.

Например есть таблица "Автомобили":

Фирма | Модели
----- | ------
BMW | M5, X5M, M1
Nissan | GT-R

Нарушение 1НФ происходит моделях BMW так как в одной ячейке содержится список из трех элементов, то есть он не является атомарным

Преобразуем таблицу к 1НФ:

Фирма | Модели
----- | ------
BMW | M5
BMW | X5M
BMW | 0-M1
Nissan | GT-R

# Вторая нормальная форма

Отношение находится во 2НФ, если оно находится в 1НФ и каждый неключевой атрибут неприводимо зависит от Первичного ключа (ПК). Неприводимость означает, что в составе потенциального ключа отсутствует меньшее подмножество отрибутов, от которого можно также вывести данную функциональную зависимость.

Например, дана таблица:

Модель | Фирма | Цена | Скидка
------ | ----- | ---- | ------
M5 | BMW | 5500000 | 5%
X5M | BMW | 6000000 | 5%
M1 | BMW | 2500000 | 5%
GT-R | Nissan | 5000000 | 10%

Таблица находится в первой нормальной форме, но не во второй. Цена машины зависит от модели и фирмы. Скидки зависят от фирмы, то есть зависимость от первичного ключа неполная. Исправляется это путем декомпозиции на два отношения (таблицы), в которых не ключевые атрибуты зависят от ПК:

Модель | Фирма | Цена
------ | ----- | ----
M5 | BMW | 5500000
X5M | BMW | 6000000
M1 | BMW | 2500000
GT-R | Nissan | 5000000

Фирма | Скидка
----- | ------
BMW | 5%
Nissan | 10%

# Третья нормальная форма

Отношение находится в 3НФ, когда находится во 2НФ и каждый не ключевой отрибут нетранзитивно зависит от первичного ключа. Проще говоря, второе правило требует выносить все не ключевые поля, содержимое которых может относиться к нескольким записям таблицы в отдельные таблицы.

Например:

Модель | Магазин | Телефон
------ | ------- | -------
BWM | Риал-авто | 87-33-98
Audi | Риал-авто | 87-33-98
Nissan | Некст-Авто | 94-54-12

Таблица находится во 2НФ, но не в 3НФ
В отношении (таблице) атрибут "Модель" является первичным ключом. Личных телефонов у автомобилей нет, и телефон зависит исключительно от магазина. Разделим таблицу на две что бы они находились в 3НФ:

Магазин | Телефон
------- | -------
Риал-авто | 87-33-98
Некст-Авто | 94-54-12

Модель | Магазин
------ | -------
BWM | Риал-авто
Audi | Риал-авто
Nissan | Некст-Авто

# Нормальная форма Бойса-Кодда (НФБК) (частная форма третьей нормальной формы)

Отношение находится в НФБК, когда каждая нетривиальная и неприводимая слева функциональная зависимость обладает потенциальным ключом в качестве детерминанта.

# Четвертая нормальная форма

Отношение находится в 4НФ, если оно находится в НФБК и все нетривиальные многозначные зависимости фактически являются функциональными зависмостями от ее потенциальных ключей.

# Пятая нормальная форма

Отношение находится в 5НФ, если оно назодится в 4НФ и отсутствуют сложные зависимые соединения между атрибутами.

# Доменно-ключевая нормальная форма

# Шестая нормальная форма

[<-----](https://github.com/s1tcomsfan/knowledge_warehouse/blob/main/databases/SQL/contents.md)
